<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>ELF</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">ELF</h1><br/><strong><h2>File Structure</h2></strong><br /><br />ELF is a format for storing programs or fragments of programs on  disk, created as a result of compiling and linking. An ELF file is  divided into sections. For an executable program, these are the text  section for the code, the data section for global variables and the  rodata section that usually contains constant strings. The ELF file  contains headers that describe how these sections should be stored in  memory. <br />Note that depending on whether your file is a linkable or an executable file, the headers in the ELF file won't be the same:<br /><br />process.o, result of gcc -c process.c $SOME_FLAGS<br />  <br /><code>C32/kernel/bin/.process.o<br />architecture: i386, flags 0x00000011:<br />HAS_RELOC, HAS_SYMS<br />start address 0x00000000<br /><br />Sections:<br />Idx Name          Size      VMA       LMA       File off  Algn<br />  0 .text         00000333  00000000  00000000  00000040  2**4<br />                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE<br />  1 .data         00000050  00000000  00000000  00000380  2**5<br />                  CONTENTS, ALLOC, LOAD, DATA<br />  2 .bss          00000000  00000000  00000000  000003d0  2**2<br />                  ALLOC<br />  3 .note         00000014  00000000  00000000  000003d0  2**0<br />                  CONTENTS, READONLY<br />  4 .stab         000020e8  00000000  00000000  000003e4  2**2<br />                  CONTENTS, RELOC, READONLY, DEBUGGING<br />  5 .stabstr      00008f17  00000000  00000000  000024cc  2**0<br />                  CONTENTS, READONLY, DEBUGGING<br />  6 .rodata       000001e4  00000000  00000000  0000b400  2**5<br />                  CONTENTS, ALLOC, LOAD, READONLY, DATA<br />  7 .comment      00000023  00000000  00000000  0000b5e4  2**0<br />                  CONTENTS, READONLY</code><br />                  <br />                  <br />The 'flags' will tell you what's actually available in the ELF file.  Here, we have symbol tables and relocation: all that we need to link the  file against another, but virtually no information about how to load  the file in memory (even if that could be guessed). We don't have the  program entry point, for instance, and we have a sections table rather  than a program header. <br /><br /><table class="table"><col/><col/><tr><th>click me</th><th>click me</th></tr><tr><td> .text</td><td> where code stands, as said above. objdump -drS .process.o will show you that</td></tr><tr><td> .data</td><td> where global tables, variables, etc. stand. objdump -s -j .data .process.o will hexdump it.</td></tr><tr><td> .bss</td><td> don't look for bits of .bss in your file: there's none. That's where your uninitialized arrays and variable are, and the loader 'knows' they should be filled with zeroes ... there's no point storing more zeroes on your disk than there already are, is it?</td></tr><tr><td> .rodata</td><td> that's where your strings go, usually the things you forgot when linking and that cause your kernel not to work. objdump -s -j .rodata .process.o will hexdump it. Note that depending on the compiler, you may have more sections like this.</td></tr><tr><td> .comment &amp; .note</td><td> just comments put there by the compiler/linker toolchain</td></tr><tr><td> .stab &amp; .stabstr</td><td> debugging symbols &amp; similar information.</td></tr></table><br /><br /><img src="images/242-1.png" alt="images/242-1.png" /><br /></div></body></html>